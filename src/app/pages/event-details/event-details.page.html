<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons>
      <ion-back-button defaultHref="/"></ion-back-button>
      <ion-title>Szczegóły wydarzenia</ion-title>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="event-details">
  <ion-card class="event-details__header ion-no-margin">
    <ion-card-content class="event-details__inner">
      <ion-grid>
        <ion-row>
          <ion-card-title class="event-details__title">{{ eventDetails ? eventDetails.name : 'Brak danych w wersji offline' }}</ion-card-title>
        </ion-row>
        <ion-row class="ion-align-items-center">
          <ion-thumbnail class="event-details__thumb">
            <!--<ion-img [src]="img" (ionError)="loadDefaultImage($event)" alt="Obrazek - {{ eventDetails ? eventDetails.name : 'brak'}}"></ion-img>-->
            <img class="event-details__image" [src]="sanitizer.bypassSecurityTrustResourceUrl(image)" onerror="this.src='/assets/no-image.jpg'" alt="Obrazek - {{ eventDetails ? eventDetails.name : 'brak'}}">
          </ion-thumbnail>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <ion-card class="event-details__card">
    <ion-card-content *ngIf="eventDetails">
      <div class="event-details__icons">
        <img class="event-details__icon" (click)="addToCalendar()" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAAEPUlEQVR4nO2cu2sVQRSHP8WI0QiiEk28EgUxAYvYaFAUJJVoSi0E8a+IdsZHtLCxiY3/ga9GC8EiWoiFGhVtlZj4xMZXNESQey3OWfYm3sfOzO7e3c18sEz27sycmd+dOXPubHbB4/F4PJ4MchB4D1T0eKefFdVu7Lwj7ER1Z4pqN3aCxtc7L4TdpUlVvFjwAjpiI+AQMA784n9fU33Uo1GZOA4buzPap8MRNbDmQpOGNOpQ0sLFZXfUSaEGDKmBOWAY6GqSP0+LSBdwEulbhYRG4n2tfDhi/jwJGHBK847H3SgQP1EBNkbMn0cBN2ren3E3yrQhkN9AOrEv2rTig8zvTJo/5VzsZkbAvGLUTx9IO+IFdMQL6IgX0JFlFmUWw0ISGT8CHbEZgUtib0W2MJphfgQ64gV0xAvoiBfQES+gI15AR7yAjiQt4CPgYYbOYydpAcvMD0xbfd5S/IZqDbwPdCRtH5i1686k7QOzdj1VvA+sgfeBjvg40BEfB6aI94E18D7QER8HOuLjwBTxPrAG3gc6YnNf2IRHyDTa36LzalYj/+c9CPQDW4A1wF/gGzAFPDPtYNICZiHu6wJGgBPAyhptbAPagW5gb9XnY8Al4EONMlbkzQe2A+cJn2cpAxPAaeAA0Aus0qNPPzuteYIvYg44h4jsTJ4E3Aa8IhTuGrDdoPx24DqhkE+BHtdG2QjYijhvJ/AFaetrYFfzZtZlN/CG8H+t+xZmKFocuA24B3Qiz7UMIKPHlidaxwNgs6Yl28qyPoXbCaftODH5LaWN8EGjx8AKm0qyLuB5wmm7NoH61xFO57M2FcThA5Pa3+tCVtsybj6vGQNqYxaJI3O/HxgwgoQjNzDzeaaD4jFwC3EXUZ8ZtDaWFquB34i4JqEK2PWpV219R760RI2lwTGkXRMWZW379EzLHSnCZsKgprdTtHlH031FELBf00Q3ThcQ2BoogoBbNf2Uos2PmnabFMqqD/yDtKujQZ6Fzw9HPerRoddnizACy5qm+fxKoNtSEwFnNG32som0+appo3YtqXNEvb6QwNYPEwGDAPW4QZk0mNLUyB85sknTSRMBL2s6irzdIs0GNyLYhq+1jZ8Uga2XpgVHsXfISR/G9zOqypryXMsdtSjLYWS7KHgNSlaOtH/KzWD4Uy7LjCFCXDcsZyPgTS1z1bBcpikhN4DKyDZ8UuxRG3OEAXxhOIeMjDfI5mfcrAcm1cbFBOpvOW1IqFVBtt+T2tJ/CCyPse5MUULiwqCjnTHUuQ5ZNCvANLAhhjozTR/wmXA6DzjUtYdw2k4DO5xblxNKyPZ7EN7cQMKPqPQiq21wCyGu0ZwrViALyyzzg+0zyCZsH7Kr0qF/D+q151X5/yALRmF9XhR6gCvIPYyoQfkMEuc1DVWK/gqTalYCh4B9SKxYQhaIZYi4b4EXyGp7F7lR1ZR/DEaPrddjKcIAAAAASUVORK5CYII="/>
        <!--<ion-icon (click)="addToCalendar()" name="alarm" class="event-details__icon"></ion-icon>-->

        <a *ngIf="eventDetails.www_url" href="{{ eventDetails.www_url }}"><img class="event-details__icon" src="data:image/png;base64,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"/></a>
        <!--<a *ngIf="eventDetails.www_url" href="{{ eventDetails.www_url }}"><ion-icon name="globe" class="event-details__icon"></ion-icon></a>-->

        <a *ngIf="eventDetails.event_url" href="{{ eventDetails.event_url }}"><img class="event-details__icon" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAABmJLR0QA/wD/AP+gvaeTAAACOklEQVR4nO2cPU7DMBiGHxBXAFF6oUqUK7DDAfjZkEDcChgQE0yAxA43gC5dgCGuWkrz+9lW7byPZEWxHH/2g9s4TjEIIYQQa8gI+AB+XHp3ebnG9c47804sdibXuN6ZNb7sPIu4m6Eq7gsSaKSLwAPgDpjw/7tmMZVRdY2P1CXuBLgFxg0ddOa6piFVHQotzlfcK5OhCg5cgClwAuzVlE/pJrIHnFL07YdAI/HOVX7asHxKAmecubI3vhsF8OUqHzQsn6LAgSv76btRbRsC6U6kg/2h21Y84m9nYj7KWeKujcBUadVPTaSNSKARCTQigUa2OlzThxtJYzQCjXQZgRveW7FetPqEaQQakUAjEmhEAo1IoBEJNCKBRiTQSJ8FHgE7MQPmtKB6TNGXF/5LvEAr0rXsUMirkuidnAQCbAPPFH16o/nbxs7kJhAiS8xRIESUmKtAiCQxZ4EQQWLuAiGwxD4IhIASuwp8AO4b5i/nLZ/fL7QjVnql4oklxqPcN6vFr8pfziu7Nkn0ETbSB4G6iRjQNMaAJtIG9ChnYFnebshguQmMKg/yElgn7yJE0JwEaknfA2UvlfQrfSP6lX5MJNCIBBqRQCMSaEQCjVgF1i3Bp3beGqvAuiX41M6Doon0CtqMwIk71m02kTJDd2z8L/9tBD6642GLa1Jj1renEJWPKYb2lGJ3i5xG4hA4Z77tyX6oQFfEf7EdO116s1XCmGJfldk2KDmkL9enYCNPCCGEEEIIIfzxC9XV/h5CvCWSAAAAAElFTkSuQmCC"/></a>
        <!--<a *ngIf="eventDetails.event_url" href="{{ eventDetails.event_url }}"><ion-icon name="calendar" class="event-details__icon"></ion-icon></a>-->

        <a *ngIf="eventDetails.fb_url" href="{{ eventDetails.fb_url }}"><svg class="event-details__icon" fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 80" width="46px"><path d="M 15 10 C 12.25 10 10 12.25 10 15 L 10 65 C 10 67.75 12.25 70 15 70 L 65 70 C 67.75 70 70 67.75 70 65 L 70 15 C 70 12.25 67.75 10 65 10 Z M 15 12 L 65 12 C 66.667969 12 68 13.332031 68 15 L 68 65 C 68 66.667969 66.667969 68 65 68 L 52.019531 68 L 52.019531 47.539063 L 59.4375 47.539063 L 60.824219 36.785156 L 52.019531 36.785156 L 52.019531 32.199219 C 52.019531 31.023438 52.203125 30.222656 52.589844 29.761719 C 52.976563 29.296875 53.699219 28.9375 55.359375 28.9375 L 60.992188 28.933594 L 60.992188 19.230469 L 60.125 19.113281 C 59.21875 18.992188 56.488281 18.761719 53.238281 18.761719 C 49.691406 18.761719 46.59375 19.859375 44.402344 22.027344 C 42.207031 24.191406 40.980469 27.378906 40.980469 31.328125 L 40.980469 36.785156 L 33.421875 36.785156 L 33.421875 47.539063 L 40.980469 47.539063 L 40.980469 68 L 15 68 C 13.332031 68 12 66.667969 12 65 L 12 15 C 12 13.332031 13.332031 12 15 12 Z M 53.238281 20.761719 C 55.976563 20.761719 57.9375 20.941406 58.992188 21.050781 L 58.992188 26.933594 L 55.359375 26.9375 C 53.382813 26.9375 51.933594 27.4375 51.0625 28.472656 C 50.1875 29.507813 50.019531 30.835938 50.019531 32.199219 L 50.019531 38.785156 L 58.546875 38.785156 L 57.675781 45.539063 L 50.019531 45.539063 L 50.019531 68 L 42.980469 68 L 42.980469 45.539063 L 35.421875 45.539063 L 35.421875 38.785156 L 42.980469 38.785156 L 42.980469 31.328125 C 42.980469 27.789063 44.042969 25.191406 45.808594 23.449219 C 47.570313 21.703125 50.101563 20.761719 53.238281 20.761719 Z M 15 61 C 14.449219 61 14 61.449219 14 62 C 14 62.550781 14.449219 63 15 63 C 15.550781 63 16 62.550781 16 62 C 16 61.449219 15.550781 61 15 61 Z M 19 61 C 18.449219 61 18 61.449219 18 62 C 18 62.550781 18.449219 63 19 63 C 19.550781 63 20 62.550781 20 62 C 20 61.449219 19.550781 61 19 61 Z M 23 61 C 22.449219 61 22 61.449219 22 62 C 22 62.550781 22.449219 63 23 63 C 23.550781 63 24 62.550781 24 62 C 24 61.449219 23.550781 61 23 61 Z M 27 61 C 26.449219 61 26 61.449219 26 62 C 26 62.550781 26.449219 63 27 63 C 27.550781 63 28 62.550781 28 62 C 28 61.449219 27.550781 61 27 61 Z M 31 61 C 30.449219 61 30 61.449219 30 62 C 30 62.550781 30.449219 63 31 63 C 31.550781 63 32 62.550781 32 62 C 32 61.449219 31.550781 61 31 61 Z M 35 61 C 34.449219 61 34 61.449219 34 62 C 34 62.550781 34.449219 63 35 63 C 35.550781 63 36 62.550781 36 62 C 36 61.449219 35.550781 61 35 61 Z M 39 61 C 38.449219 61 38 61.449219 38 62 C 38 62.550781 38.449219 63 39 63 C 39.550781 63 40 62.550781 40 62 C 40 61.449219 39.550781 61 39 61 Z M 54 61 C 53.449219 61 53 61.449219 53 62 C 53 62.550781 53.449219 63 54 63 C 54.550781 63 55 62.550781 55 62 C 55 61.449219 54.550781 61 54 61 Z M 58 61 C 57.449219 61 57 61.449219 57 62 C 57 62.550781 57.449219 63 58 63 C 58.550781 63 59 62.550781 59 62 C 59 61.449219 58.550781 61 58 61 Z M 62 61 C 61.449219 61 61 61.449219 61 62 C 61 62.550781 61.449219 63 62 63 C 62.550781 63 63 62.550781 63 62 C 63 61.449219 62.550781 61 62 61 Z M 66 61 C 65.449219 61 65 61.449219 65 62 C 65 62.550781 65.449219 63 66 63 C 66.550781 63 67 62.550781 67 62 C 67 61.449219 66.550781 61 66 61 Z"/></svg></a>
        <!--<a *ngIf="eventDetails.fb_url" href="{{ eventDetails.fb_url }}"><ion-icon name="logo-facebook" class="event-details__icon"></ion-icon></a>-->

        <ion-button fill="clear" class="event-details__fav" (click)="addToFavourites(eventDetails)" *ngIf="!isFavourite(eventDetails.id)">
          <ion-icon name="star-outline" slot="icon-only" class="event-details__favicon"></ion-icon>
        </ion-button>
        <ion-button fill="clear" class="event-details__fav" (click)="removeFromFavourites(eventDetails)" *ngIf="isFavourite(eventDetails.id)">
          <ion-icon name="star" slot="icon-only" class="event-details__favicon"></ion-icon>
        </ion-button>
      </div>

      <h4 class="event-details__caption">Konwencja:</h4>
      <p>{{ eventDetails.event_type }}</p>

      <h4 class="event-details__caption">Data:</h4>
      <p *ngIf="eventDetails.cancelled == 1" class="event-details__cancelled">Odwołane</p>
      <p *ngIf="eventDetails.date_end == eventDetails.date_begin; else date_end" [class]="eventDetails.cancelled == 1 ? 'event-details__date--cancelled' : ''">{{ eventDetails.date_begin | date: "dd.MM.y"}}</p>
      <ng-template #date_end>
        <p [class]="eventDetails.cancelled == 1 ? 'event-details__date--cancelled' : ''">{{ eventDetails.date_begin | date: "dd.MM.y" }} - {{ eventDetails.date_end | date: "dd.MM.y"}}</p>
      </ng-template>

      <h4 class="event-details__caption">Adres:</h4>
      <a class="event-details__link" href="https://www.google.com/maps/search/?api=1&query={{ eventDetails.address }},{{ eventDetails.location }}">
        <ng-container *ngIf="eventDetails.address==null; else full_address">{{ eventDetails.location }} <ion-icon name="exit"></ion-icon></ng-container>
        <ng-template #full_address>
          <ng-container>{{ eventDetails.address }}, {{ eventDetails.location }} <ion-icon name="exit"></ion-icon></ng-container>
        </ng-template>
      </a>

      <ng-container *ngIf="eventDetails.price">
        <h4 class="event-details__caption">Cena:</h4>
        <div [outerHTML]="eventDetails.price"></div>
      </ng-container>

      <ng-container *ngIf="eventDetails.description">
        <h4 class="event-details__caption">Opis:</h4>
        <div [outerHTML]="eventDetails.description"></div>
      </ng-container>
    </ion-card-content>

    <ion-card-content *ngIf="!eventDetails">
      <p>Brak informacji o wydarzeniu w trybie offline.</p>
      <p>Połącz się z Internetem i spróbuj ponownie.</p>
    </ion-card-content>
  </ion-card>
</ion-content>
